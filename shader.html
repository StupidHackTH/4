<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>sht4 image shader</title>
    <link
      href="https://unpkg.com/tailwindcss@1.4.6/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: inter, sans-serif;
        --block-transform: translate(0, 0);
      }
      .difference {
        mix-blend-mode: difference;
      }
      .our-shadow {
        color: white;
        text-shadow: -4px -4px 0 #000, -2px -2px 0 #000, 1px -1px 0 #000,
          1px 1px 0 #000, -1px 1px 0 #000;
      }
    </style>
  </head>
  <body class="bg-black text-white">
    <div id="app">
      <div class="flex">
        <div
          id="preview"
          class="relative"
          style="width: 512px; height: 512px; background: black;"
        >
          <div
            class="absolute inset-0 z-10 bg-cover"
            :style="{ backgroundImage: `url(${image})` }"
          ></div>
          <div
            class="absolute inset-0 z-20 difference"
            :style="styles.bg"
          ></div>
          <div
            class="absolute inset-0 z-30 difference bg-black flex items-center justify-center font-bold"
            style="font-size: 180px;"
          >
            <div :style="styles.text">sht4</div>
          </div>
        </div>
        <div class="p-5">
          <p class="mb-4">
            <input type="file" @change="upload" ref="file" />
          </p>
          <p class="flex space-x-4">
            <button
              class="relative"
              style="width: 128px; height: 128px;"
              @click="styles.bg = makeStyles().bg"
              :style="styles.bg"
            ></button>
            <button
              class="relative bg-black inline-flex items-center justify-center font-bold appearance-none"
              style="width: 128px; height: 128px; font-size: 45px;"
              @click="styles.text = makeStyles().text"
            >
              <div :style="styles.text">sht4</div>
            </button>
          </p>
        </div>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/vue@2.6.11/dist/vue.min.js"
      integrity="sha256-ngFW3UnAN0Tnm76mDuu7uUtYEcG3G5H1+zioJw3t+68="
      crossorigin="anonymous"
    ></script>
    <script>
      const rand = () => Math.random() * 2 - 1
      const mkdeg = () => ~~(Math.random() * 360)
      const mkc = () => `hsl(${mkdeg()}deg, 100%, 50%)`
      const mkg = () => `linear-gradient(${mkdeg()}deg, ${mkc()}, ${mkc()})`
      const makeStyles = () => {
        return {
          bg: { background: mkg() },
          text: { transform: `rotate(${mkdeg()}deg)`, color: mkc() },
        }
      }
      const vm = new Vue({
        el: '#app',
        data: {
          image: '',
          styles: makeStyles(),
        },
        methods: {
          upload() {
            this.image = URL.createObjectURL(this.$refs.file.files[0])
          },
        },
      })
    </script>
  </body>
</html>
